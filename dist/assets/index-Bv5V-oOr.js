var C=Object.defineProperty;var M=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var F=(r,e,t)=>(M(r,typeof e!="symbol"?e+"":e,t),t),E=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var i=(r,e,t)=>(E(r,e,"read from private field"),t?t.call(r):e.get(r)),D=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},l=(r,e,t,n)=>(E(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();const d="depense",g="income",h="budget";class I{setDataToLocalStorage(e,t){localStorage.setItem(e,JSON.stringify(t))}getDataFromLocaleStorage(e){if(e===h){const t=JSON.parse(localStorage.getItem(e))||0;return parseFloat(t)}return JSON.parse(localStorage.getItem(e))||[]}}var s,c;class S{constructor(){D(this,s,[]);D(this,c,[]);F(this,"storage",new I)}addDepense(e,t){const n={id:Date.now(),title:e,montant:t};l(this,s,this.storage.getDataFromLocaleStorage(d)),i(this,s).push(n),this.storage.setDataToLocalStorage(d,i(this,s)),this.iniitBudget()}addInCommes(e,t){const n={id:Date.now(),title:e,montant:t};l(this,c,this.storage.getDataFromLocaleStorage(g)),i(this,c).push(n),this.storage.setDataToLocalStorage(g,i(this,c))}iniitBudget(e=localStorage.getItem(h)){l(this,s,this.storage.getDataFromLocaleStorage(d));const t=this.getTotalMoney(i(this,s));this.storage.setDataToLocalStorage(h,parseFloat(e)-t)}deleteDepense(e){l(this,s,this.storage.getDataFromLocaleStorage(d)),l(this,s,[...i(this,s)].filter(t=>t.id!==e)),this.storage.setDataToLocalStorage(d,i(this,s)),this.iniitBudget()}deleteIncomne(e){l(this,c,this.storage.getDataFromLocaleStorage(g)),l(this,c,[...i(this,c)].filter(t=>t.id!==e)),this.storage.setDataToLocalStorage(g,i(this,c)),this.iniitBudget()}getTotalMoney(e=[]){return e.reduce((t,n)=>n.hasOwnProperty("montant")?t+=parseFloat(n.montant):t,0)}getTotalBudgetInfo(){const e=this.storage.getDataFromLocaleStorage(h);l(this,s,this.storage.getDataFromLocaleStorage(d)),l(this,c,this.storage.getDataFromLocaleStorage(g));const t=this.getTotalMoney(i(this,s)),n=this.getTotalMoney(i(this,c)),o=e+(n-t);return{budget:e,depenses:t,solde:o}}}s=new WeakMap,c=new WeakMap;class b{createAndInsertDataToTable(e,t){const n=window.location.pathname;if(!(t.length<1)&&e&&(n==="/"||n.includes("/index.html"))){const o=document.querySelector(`table #${e}`),a=o.querySelector("#lastTrEl");for(const u of[...t]){const f=document.createElement("tr"),y=document.createElement("td"),L=document.createElement("td"),w=document.createElement("td"),p=document.createElement("button");p.title="Supprimer",y.innerText=u.title,L.innerText=u.montant+" F CFA",p.innerText="supprimer",f.appendChild(y),f.appendChild(L),w.appendChild(p),f.appendChild(w),o.insertBefore(f,a),p.addEventListener("click",()=>this.deleteItemFromBudget(u,e))}}}deleteItemFromBudget(e,t){if(!window.confirm("Voulez-vous continuer ?"))return;const o=new S;t==="depense"?o.deleteDepense(e.id):o.deleteIncomne(e.id),window.location.reload()}insertBudgetInfos(){const e=new S().getTotalBudgetInfo(),t=document.querySelectorAll(".card_montant p");for(const n of t){const o=n.dataset.montant;e[o]?(e[o]<0?n.style.color="red":n.style.color="black",n.innerText=e[o]+" F CFA"):n.innerText="0 F CFA"}}insertErrorMessage(e){if(!e)return;const t=document.querySelector(".errorMessage");t.style.display="block",t.innerText=e}}const m=document.querySelector(".formBox form"),B=new I,O=B.getDataFromLocaleStorage(d),x=B.getDataFromLocaleStorage(g),T=new b;T.createAndInsertDataToTable(d,O);T.createAndInsertDataToTable(g,x);T.insertBudgetInfos();m==null||m.addEventListener("submit",r=>{r.preventDefault();const e=new FormData(r.target),t=e.get("title"),n=e.get("montant");if(m.id!==h&&t.trim()===""){new b().insertErrorMessage("Ce champs est obligatoire");return}const o=new S;m.id===g?o.addInCommes(t,n):m.id===d?o.addDepense(t,n):o.iniitBudget(n),window.location.href=window.location.origin});
